<head>
	<title>GameTemplate説明書</title>
</head>

<body>
<h1>GameTemplate説明書</h1>
DXライブラリを用いたゲーム作成のためのテンプレートです。<br>
ダウンロードはこちらからできます ⇒ <a href = "GameTemplate.zip">ver1.01 ダウンロード</a>

<hr>
<h3>もくじ</h3>
<ul>
<li><a href = "#first">使い方</a></li>
<li><a href = "#abstract">概要</a></li>
</ul>
<hr>

<div id = "first"></div>
<h2>使い方</h2>
このテンプレートはVisual Studio 2013で動作することを想定しています。<br>
それ以前のバージョンですと動作しないと思われるので、2013以降をインストールしてください。<br>
<br>
まず、<a href = "http://homepage2.nifty.com/natupaji/DxLib/">DXライブラリ</a>を入手してください。<br>
保存場所は任意でいいですが、テンプレートでは<br>
<u>Cドライブ直下に「DxLib」というフォルダ名で保存されたもの</u>を読み込むようにしています。<br>
ディレクトリパスは<b>「C:\DxLib」</b>ということになります。<br>
他のディレクトリにしたい場合は、テンプレートでプロジェクトを作成した後、<br>
DXライブラリの初期設定の方法に従ってパスを指定しなおしてください。<br>
それを新たにテンプレートとしてエクスポートすれば便利だと思います。<br>
ウィザードを手作りできればよかったのですが、何だかめんどくさいのでこのままでご了承ください。<br>
<br>
次に、このページの上部にある<b>GameTemplate.zip</b>をダウンロードしてください。解凍はいらないです。<br>
Visual Studio 2013をインストールしましたら、<br>
どこかに<b>「Visual Studio 2013」</b>というフォルダが生まれると思います（ドキュメントとか）。<br>
その中にある<b>「Templates\ProjectTemplates」</b>の中にGameTemplate.zipをzipのまま放り込んでください。<br>
これで無事、テンプレートが使えるようになると思います。<br>
<br>
Visual Studio 2013を起動しましたら、「新しいプロジェクト」を選択し、<br>
「テンプレート > Visual C++」を選択すると「GameTemplate」が出てきていると思います。<br>
それを選択して「名前」の欄に好きなプロジェクト名を入れましたら、OKしてください。<br>
これにて、ゲームの骨格が完成いたします。<br>
F5を押しますとビルドして実行されますので、ゲーム画面が表示されるかご確認ください。<br>
コードをそのままぶちこんでいますので、初回ビルドは遅いです。<br>
<br><hr>

<div id = "abstract"></div>
<h2>概要</h2>
プロジェクトを作成しますと、ソリューションエクスプローラーにて<br>
<b>ソースファイル、ヘッダーファイル、リソースファイル</b>という３つのフォルダが現れると思います。<br>
その名の通り、ソースファイルにはソースファイル、ヘッダーファイルにはヘッダーファイルを入れています。<br>
リソースファイルは空っぽです。後述するアイコンを設定するときには使いますが、基本いらないと思います。<br>
<br>
ソースファイル、ヘッダーファイルにはそれぞれ<b>シーン、共通</b>というフォルダがあります。<br>
そして、フォルダに入っていないファイルがいくらか見られると思います。<br>
<b>「共通」フォルダは基本的にいじる必要がないものとして設計しているつもりです。</b><br>
main関数とか、シーンマネージャーとか、見てもややこしくなるだけなものは全部共通フォルダに押し込めました。<br>
どんなものがあるか確認ができる程度で済むようにしています。<br>
更に言えば、いじる必要があるのは<b>大部分が「シーン」フォルダのみ</b>です。<br>
ですから、多分いくらか混乱は抑えられることでしょう。<br>
<br>
以下に、各ファイルの概要を載せます。それぞれ必要なときにいじるのみですから、流し読みで結構です。<br>
共通フォルダ内のものを見るときは、ヘッダファイルを見れば色々わかるようにしています。<br>

<br><h3>【メイン画面】（シーン > MainScene.h／.cpp）</h3>
ゲームのメイン画面です。ここをいじれば、ゲームができます。<br>
サンプルでは起動すると「キャンセルキーで終了します」と表示されますが、<br>
実際にMainScene.cppを開くとその文字がそのまんまプログラム中に書かれているのが見られると思います。<br>
小規模なミニゲームを作成するだけなら、メイン画面をいじるだけで十分作れます。<br>
ただ、規模が大きくなってきてタイトル画面やらメニュー画面やらを作成する必要が出てきましたら、<br>
新たにシーンフォルダに画面を追加し、シーンを切り替えるということをしていく必要があります。<br>

<br><h3>【シーン定義】（Scenes.h）</h3>
シーンを定義している所です。<br>
新しいシーンクラスを作ったときは、GetSceneObject関数にシーン取得の命令を追加する必要があります。<br>
追加する必要があるといっても、１つのシーンにつき２行追加するだけです。<br>

<br><h3>【固定情報データ】（InfoData.h）</h3>
ゲーム中に変化することのない情報を格納しています。<br>
ゲームタイトルとか、初期ウィンドウサイズ、初期シーン名称など。<br>
何か固定情報を追加することがあれば、既存の記法を真似て作成してください。<br>

<br><h3>【共通データ】（CommonData.h／.cpp）</h3>
ゲーム中に変化する共通データをまとめています。<br>
共通データとは、シーンをまたいでも変化しない、すべてのシーンに共通するデータのことです。<br>
これには、セーブするデータとセーブしないデータの２種類があります。<br>
それらのデータの宣言と、Inilialize（初期化）関数の中身の設定、<br>
また、セーブ・ロードの関数を作成するときなどにいじることになります。<br>
セーブデータの仕組みはゲームで共通ではないので、デフォルトではそれらの機能は空っぽになっています。<br>
ですから、セーブ・ロードを行うゲームでは必然的にいじることになります。<br>

<br><h3>【キー入力】（KeyInput.h／.cpp）</h3>
キー入力のキー割り当てなどを編集することが可能です。<br>
デフォルトではRPGツクールで使うキーを登録していますが、ここをいじれば好きなキー割り当てが可能です。<br>
列挙型のKeyTypeにてキーの種類を登録し、KeyInput::Initializeにてそれぞれのキーの判定条件を登録してください。<br>
この判定条件はSetKeyCond関数にていつでも変更できますので、これを利用しますと<br>
ゲーム中にプレイヤーがキー割り当てを変更するという機能を作成することが可能です。<br>
キーの状態取得はGetKey関数にて行います。<br>

<br><h3>【main関数】（共通 > main.cpp）</h3>
main関数があります。DirectXの初期化を行って実行します。<br>
ゲームオブジェクトを生成してあとはそれに任せていますので、いじる必要ありません。<br>

<br><h3>【ゲームクラス】（共通 > Game.h／.cpp）</h3>
ゲームそのもののクラスです。<br>
初期の頃はこれを直に編集しており、規模が大きくなるとSceneManagerを追加するようにしていましたが<br>
めんどくさくなったので、常に持たせるようにしました。いじるような所ないと思います。<br>

<br><h3>【シーンマネージャー】（共通 > SceneManager.h／.cpp）</h3>
シーンを取り扱う機構です。シーンの切り替えなどをします。<br>

<br><h3>【シーン基底クラス】（共通 > BaseScene.h／.cpp）</h3>
シーンはこのクラスを継承して作成します。<br>
protected以上のメンバーは各クラスでも自由に利用できますので、ヘッダファイルを眺めて使えそうなのを探してみてください。<br>
シーンを変更するときはChangeScene関数、ゲームを終了するときはEndGame関数を呼び出します。<br>
また、画像と音楽はそれぞれpic、soundという連想配列で保持されており、自由に利用可能です。<br>
シーンを閉じる際に自動ですべてのメモリ開放を行いますので、deleteがいらない利点があります。<br>

<br><h3>【共通ヘッダ】（共通 > common.h）</h3>
おおよそすべてのファイルはこれをインクルードしています。<br>
よく使うものたちはすべてインクルードしていますので、これだけ呼び出せば便利そうです。<br>
どこでも使用可能な便利関数などを作るときはここに新たに追加するのも手だと思います。<br>

<br><h3>【素材基底クラス】（共通 > ContentBase.h／.cpp）</h3>
Graphic、Soundの基底クラスです。<br>
何でわざわざ用意したのか覚えてません。<br>

<br><h3>【画像クラス】（共通 > Graphic.h／.cpp）</h3>
画像を取り扱うクラスです。<br>
いじるものではありませんが、よく使うことになるでしょう。<br>
ヘッダファイルに使える機能をまとめていますので、参考にしてください。<br>

<br><h3>【音楽クラス】（共通 > Sound.h／.cpp）</h3>
音楽を取り扱うクラスです。<br>
BGMクラス、SEクラスでそれぞれBGM、効果音を取り込めるようにしているつもりです。<br>
こちらも画像同様、ヘッダファイルに機能をまとめています。br>

<br><h3>【２次元ベクトル】（共通 > Vector2.h）</h3>
Vector2は整数のベクトル、Vector2dは実数のベクトルです。<br>
２次元の値を用いるときは、これを利用したほうがきれいだと思います。<br>

<br><h3>【乱数クラス】（共通 > Random.h）</h3>
乱数のクラスです。それだけです。<br>
DefaultRand関数で乱数の初期化が行えますが、これはゲーム開始時に自動で呼ばれます。<br>
Rand関数にて乱数を発生させることができます。<br>
SetDefaultRandで任意のシードにて乱数の初期化が行えます。リプレイファイルの作成などに用います。<br>





<br><hr>

2014年9月26日 フェルミウム湾<br>
<br>

</body>

